import os

def download_script(url, save_path):
    try:
        response = requests.get(url)
        response.raise_for_status()  # Raise exception for 4xx or 5xx status codes
        with open(save_path, 'wb') as file:
            file.write(response.content)
        print(f"Downloaded the latest version of the script.")
    except requests.exceptions.RequestException as e:
        print(f"Error downloading the script: {e}")
        print("Please try again.")

def run_script(script_path):
    try:
        os.system(f'python {script_path}')
    except FileNotFoundError:
        print(f"Script '{script_path}' not found.")
    except PermissionError:
        print(f"No write permissions for '{script_path}'.")
    except Exception as e:
        print(f"An error occurred while running the script: {e}")
        print("Please troubleshoot the script or seek help.")

def main():
    repo_owner = "bdgxs"
    repo_name = "ts.py"
    file_path = "ts.py"

    url = f"https://raw.githubusercontent.com/bdgxs/ts.py/main/ts.py"
    latest_url = requests.get(url).json()['download_url']

    if latest_url:
        download_script(latest_url, SCRIPT_PATH)
        run_script(SCRIPT_PATH)
    else:
        print("No latest version of the script found.")
        download_script(GITHUB_RAW_URL, SCRIPT_PATH)
        run_script(SCRIPT_PATH)

if __name__ == "__main__":
    main()

__import__('sys').exit()
